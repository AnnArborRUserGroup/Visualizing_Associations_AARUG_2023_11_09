---
title: "Visualizing Associations"
subtitle: "Ann Arbor R Users Group Meeting, 9 Nov 2023"
format: revealjs
editor: source
author: 
  - name: Barry DeCicco
    orcid: 0000-0002-5013-1151
    email: bdecicco2001@yahoo.edu
    affiliations: 
      - name: Michigan State University, Center for Statistical Training and Consulting
---

# What Will This Presentation Cover

## Correlations and Associations

Which ones you can run in R

-   How to get usable data sets.
-   INSERT TEXT HERE

## How to Display The Results

-   Plots
-   Heatmaps
-   Other figures

## Packages Used

-   ggplot2
-   geom_tile for heatmaps
-   pheatmap
-   ggally
-   ggpairs() function
-   corrgram

## Load Packages - General

```{r}
#| label: load-packages-general
#| echo: true

# Load some packages
library(devtools)   #  
library(here)       # for here(), i_am()
library(dplyr)        # for %>%, arrange(), filter(), group_by(), mutate(), etc.
library(tidyr)        # for pivot_longer(), pivot_wider(), etc.
library(rmarkdown)    # for render()
library(knitr)      
library(kableExtra) 
library(knitr)        # for kable(), which makes nice tables.
#opts_knit$set(eval.after = 'fig.cap') 
options(kableExtra.latex.load_packages = FALSE)
library(kableExtra)
library(quarto)           # for quarto_version()


```

## Load Packages - Less Common, Good for Correlations

```{r}
#| label: load-packages-less-common
#| echo: true

# Load some packages
library(GGally)   
library(pheatmap)  

```

## Load Packages - Easystats

<https://github.com/easystats>

```{r}
#| label: load-packages-easystats
#| echo: true

# Load some packages
library(see)               # for visualization
library(correlation)       # for correlations

```

## What is a correlation matrix?

-   It's a square matrix of numbers, with certain properties.
-   Each entry X ~ij~ is the correlation between the ith and jth variables.
-   In this case, we could use associations rather than correlations,
where the association is bounded by [-1,1] or [0,1], and X ~ii~ = 1
-   The correlation matrix might be computed using listwise deletion or by pairwise deletion.  In the latter case, the matrix might not meet other requirements (i.e., not positive semi-definite) which will not be dealt with here.


## Examples of Correlation Matrices

- Create synthetic data 
```{r}
set.seed(8)
m <- matrix(round(rnorm(200), 2), 10, 10)

colnames(m) <- paste("Var", 1:10)
rownames(m) <- paste("Var", 1:10)

m 

```


## Start with the Easy - GGally

```{r}
# Create data 
data <- data.frame( var1 = 1:100 + rnorm(100,sd=20), v2 = 1:100 + rnorm(100,sd=27), v3 = rep(1, 100) + rnorm(100, sd = 1)) 
data$v4 = data$var1 ** 2 
data$v5 = -(data$var1 ** 2) 

ggcorr(data, method = c("everything", "pearson")) 

```

## References

-   The R Graph Gallery <https://r-graph-gallery.com/>
-   R-Charts <https://r-charts.com/>
-   easystats <https://github.com/easystats>
-   The correlation package <https://easystats.github.io/blog/posts/correlation_presentation/>
